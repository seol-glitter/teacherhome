<!doctype html>
<html lang="ko">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>교사용 홈</title>
<meta name="robots" content="noindex,nofollow">
<style>
  :root{--primary:#0ea5e9; --primaryD:#0284c7; --success:#22c55e; --danger:#ef4444; --muted:#64748b; --line:#e2e8f0}
  html,body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans KR",sans-serif;color:#0f172a}
  .wrap{max-width:960px;margin:0 auto;padding:16px}
  .banner{margin:4px 0 10px}
  .banner img{width:100%;display:block;border-radius:16px}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media (max-width:900px){ .grid{grid-template-columns:1fr} }
  .card{background:#fff;border:1px solid var(--line);border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.06);padding:16px}
  .card h3{margin:0 0 12px}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  input{width:100%;padding:12px;border-radius:12px;border:1px solid #cbd5e1;background:#fff}
  .btn{padding:12px 16px;border-radius:12px;border:0;font-weight:900;color:#fff;cursor:pointer;display:inline-block;text-align:center}
  .btn.primary{background:var(--primary)} .btn.primary:hover{background:var(--primaryD)}
  .btn.success{background:var(--success)}
  .btn.danger{background:var(--danger)}
  .btn.muted{background:#334155}
  .note{font-size:12px;color:#334155}
  .bullets{margin:0;padding-left:18px;color:#334155}
  .bullets li{margin:6px 0}
  .badge{display:inline-block;margin-left:8px;padding:4px 10px;border-radius:999px;font-weight:800;font-size:12px}
  .badge.on{background:#dcfce7;color:#065f46}
  .badge.off{background:#fee2e2;color:#991b1b}
</style>
<body>
<!-- EXEC Glue v2: 한번 받은 exec를 모든 페이지에서 공유 + 내부 링크에 자동 부착 -->
<script>
(function(){
  const q = new URLSearchParams(location.search);
  const paramExec = (q.get('exec')||'').trim();
  const savedExec = localStorage.getItem('EXEC')||'';
  const DEFAULT_EXEC = ""; // ← (옵션) 앱 패킹으로 ?exec 못 쓰면 여기에 교사용 EXEC를 넣어두세요.

  const EXEC = paramExec || savedExec || DEFAULT_EXEC;
  if (EXEC && EXEC !== savedExec) localStorage.setItem('EXEC', EXEC);
  window.EXEC = EXEC;

  // 내부 링크 이동 시 exec= 자동 부착
  document.addEventListener('DOMContentLoaded', () => {
    if (!EXEC) return;
    document.querySelectorAll('a[href$=".html"]').forEach(a=>{
      try{
        const u = new URL(a.getAttribute('href'), location.href);
        if(!u.searchParams.get('exec')){
          u.searchParams.set('exec', EXEC);
          a.setAttribute('href', u.pathname + u.search);
        }
      }catch(_){}
    });
  });
})();
</script>

<div class="wrap">
  <!-- 배너: GitHub Pages 루트(/teacherhome) 기준 고정 경로 -->
  <div class="banner">
    <img id="bannerImg" src="/teacherhome/banner.png" alt="불의 마법을 푸는 안전 열쇠">
  </div>

  <div style="margin:12px 0 0 4px;font-weight:800">
    교사용 홈 <span id="bindState" class="badge off">손님</span>
  </div>

  <div class="grid" style="margin-top:10px">
    <div class="card">
      <h3>① 교사용 연결(바인드)</h3>
      <div class="row">
        <a class="btn primary" href="./bind.html">교사용 연결하기</a>
        <a class="btn" style="background:#64748b" href="./dashboard.html">대시보드 열기</a>
      </div>
      <p class="note" style="margin-top:10px">
        최초 1회만 기관명/학급명/교사용 비밀번호로 연결해 주세요. 같은 기기는 자동으로 이어집니다.
      </p>
    </div>

    <div class="card">
      <h3>② 아이들이 촬영(앱/웹뷰)</h3>
      <div class="row">
        <a class="btn success" href="./capture.html?mode=A">A모드(빠름·심사용)</a>
        <a class="btn muted" href="./capture_basic.html?mode=B">B모드(배포용)</a>
      </div>
      <ul class="bullets">
        <li>A모드: 브라우저에서 임베딩 → 서버 예측 API로 즉시 분류</li>
        <li>B모드: 느리더라도 개인정보 최소화(배포 권장)</li>
      </ul>
    </div>

    <div class="card">
      <h3>③ 학부모 성취 열람 홈</h3>
      <div class="row">
        <a class="btn" style="background:#0ea5e9" href="./parent.html">학부모용 바로가기</a>
      </div>
      <p class="note">대시보드에서 저장한 <b>학부모 공용코드</b> + <b>자녀번호</b>(명단 순번)로 조회합니다.</p>
    </div>
  </div>
</div>

<script>
  // 간단한 상태 뱃지
  (function(){
    const pill=document.getElementById('bindState');
    const tk=(localStorage.getItem('tk')||localStorage.getItem('teacherKey')||'').trim();
    if(tk){ pill.textContent='연결됨'; pill.classList.remove('off'); pill.classList.add('on'); }
  })();
</script>
</body>
</html>
